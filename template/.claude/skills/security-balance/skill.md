---
name: security-balance
description: セキュリティ対策の導入を検討する時、過剰なセキュリティと利便性のバランスに迷った時、または認証・認可設計の判断が必要な時に使用する。4軸トレードオフ評価を提供する。
---

# セキュリティバランス評価スキル

セキュリティ対策を実装する際に、安全性だけでなく UX・パフォーマンス・実装複雑性・リスクの現実性を総合的に判断するためのスキル。

## 使用タイミング

- セキュリティ課題に対応するとき
- 新機能実装時にセキュリティ面の設計判断をするとき
- 認証・認可ロジックの追加・変更時
- セキュリティ対策の優先度を判断するとき

## プロジェクトコンテキストの考慮

判断にあたり、プロジェクトの特性を常に考慮すること：

- アプリケーションの性質（誰がユーザーか、どんなデータを扱うか）
- ユーザーベースの信頼レベル（パブリック / 招待制 / 社内 等）
- 攻撃のモチベーション（金銭的価値のあるデータの有無）
- 保護が必須のデータ（個人情報、認証情報 等）

## 判断フレームワーク（4軸評価）

各セキュリティ対策について以下の4軸で評価し、ユーザーに提示する：

| 軸 | 評価内容 |
|---|---|
| リスクの現実性 | 理論的な脅威 vs 実際の攻撃可能性。アプリの特性を考慮 |
| UX への影響 | ユーザー体験を損なわないか。過剰な認証ステップや制限がないか |
| パフォーマンス影響 | 不要なクエリ、追加のAPI呼び出し、レイテンシ増加がないか |
| 実装複雑性 | コードの複雑さ、保守コスト、バグ混入リスクが適切か |

## 判断基準マトリクス

リスクレベル x 影響度で対応方針を分類する：

### P0（即対応）
認証バイパス、データ漏洩、SQL インジェクション等。トレードオフ関係なく修正する。

### P1（要対応・バランス考慮）
アクセス制御の抜け、権限昇格の可能性。4軸評価を行い最適解を選択する。

### P2（改善推奨）
情報露出の軽微なリスク、ベストプラクティスからの逸脱。コスト対効果で判断する。

### P3（検討不要 or 後回し）
理論的リスクのみで実際の攻撃シナリオが現実的でない。対応しない判断もあり。

## アンチパターン（過剰セキュリティの例）

プロジェクトの規模や性質に対して過剰になりがちな対策：

- 小規模アプリで企業レベルの監査ログを実装
- 全 API エンドポイントにレート制限を追加（内部 API 含む）
- フレームワーク認証で十分な場合に過剰な CSRF トークン検証を追加
- 公開情報を含む全フィールドの暗号化
- 全操作に対する多要素認証の要求
- 低リスクデータへのアクセスに複雑な権限階層を導入

## 出力フォーマット

対策を提案する際は以下のテンプレートで判断根拠を明示すること：

```markdown
## セキュリティ対策評価: [対策名]

**リスクレベル**: P0/P1/P2/P3
**対応方針**: 即対応 / バランス考慮 / コスト対効果判断 / 対応不要

### 4軸評価
- リスクの現実性: [高/中/低] - [根拠]
- UX への影響: [大/中/小/なし] - [具体的影響]
- パフォーマンス影響: [大/中/小/なし] - [具体的影響]
- 実装複雑性: [高/中/低] - [工数・保守コスト]

### 推奨アプローチ
[バランスを取った具体的な対策案]

### 代替案
[より軽量な案 or より堅牢な案があれば]
```

## 複数の対策を比較する場合

複数のセキュリティ課題を一括で評価する場合は、一覧表で優先度を示す：

```markdown
| # | 対策 | リスクレベル | 現実性 | UX影響 | 性能影響 | 複雑性 | 対応方針 |
|---|------|-------------|--------|--------|---------|--------|---------|
| 1 | ... | P0 | 高 | なし | なし | 低 | 即対応 |
| 2 | ... | P2 | 低 | 中 | 小 | 高 | 対応不要 |
```
